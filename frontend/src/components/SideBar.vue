<template>
    <div>
        <!--    <el-radio-group v-model="isCollapse" style="margin-bottom: 20px;">-->
        <!--      <el-radio-button :label="false">expand</el-radio-button>-->
        <!--      <el-radio-button :label="true">collapse</el-radio-button>-->
        <!--    </el-radio-group>-->
        <el-menu default-active="2" class="el-menu-vertical-demo">
            <el-menu-item index="1">
                <i class="el-icon-menu"></i>
                <span slot="title">Dashboard</span>
            </el-menu-item>
            <el-submenu index="2">
                <template slot="title">
                    <i class="el-icon-location"></i>
                    <span slot="title">Courses</span>
                </template>
                <el-menu-item v-for="course in courses" :key="course.id" :index="courseIndex">
                    {{course.name}}
                </el-menu-item >
            </el-submenu>
            <el-menu-item index="3" disabled>
                <i class="el-icon-document"></i>
                <span slot="title">Navigator Three</span>
            </el-menu-item>
            <el-menu-item index="4">
                <i class="el-icon-setting"></i>
                <span slot="title">Navigator Four</span>
            </el-menu-item>
        </el-menu>
    </div>
</template>

<script>
    import axios from 'axios';

    let course_index = -1;

    export default {
        name: "SideBar",
        computed: {
            courseIndex: function() {
                course_index++;
                return `2-${course_index}`;
            }
        },
        data() {
            return {
                isCollapse: true,
                courses: []
            }
        },
      mounted () {
        axios
          .get('/api/course/')
          .then(response => (this.courses = response.data))
      }
    }
</script>

<style scoped>
    .el-menu-vertical-demo:not(.el-menu--collapse) {
        width: 200px;
        min-height: 400px;
    }
</style>